
~~~~~~~
db.taglogs.updateMany(
  { "storeNodeInfo.deviceId": { $exists: true } },
  [
    {
      $set: {
        deviceId: {
          $cond: {
            if: { $ne: ["$storeNodeInfo.deviceId", null] },
            then: "$storeNodeInfo.deviceId",
            else: "$deviceId"
          }
        }
      }
    }
  ]
)
// ~~~~~~~~~~~~~~
db.taglogs.updateMany(
  {
    created: { $gte: ISODate('2025-05-11T00:00:00.000+0530') },
  },
  {
    $set: { processed: 'FRESH' },
  },
);
// ~~~~~~~~~~~~~~
db.sales_data.updateMany(
  {
    posdatetime: { $gte: ISODate('2025-05-11T00:00:00.000+05:30') }
  },
  {
    $set: { processed: false, tried: false, eanTried: true }
  }
);
// ~~~~~~~~~~~~~`
db.taglogs.updateMany(
  { sales_data: { $exists: true } },
  { $unset: { sales_data: "" } }
);
//
db.post_processed_taglogs2.remove({})
~~~~~~~~~~~~~~~~~~

db.getCollection("live_trades").remove({}) 
db.getCollection("past_trades").remove({}) 
db.getCollection("watch_list").remove({}) 
db.getCollection("algo_logger").remove({}) 
db.getCollection("btst_tracker").remove({}) 
db.getCollection("btst_trades").remove({}) 
db.getCollection("n500_positional").remove({}) 
db.getCollection("midcap_positional").remove({}) 
//db.getCollection("btst_tracker").find({})~
~~~~~~~~~~~~~~
var taskCreator = "admin";

db.task_book.insertOne({
  createTime: new Date(),
  updateTime: new Date(),
  deviceId: "2c:cf:67:1d:63:40",
  taskStatus: "QUEUED",
  taskType: "CONFIG",
  taskProgress: 0,
  taskResult: null,
  taskCreator: taskCreator,
  taskLogs: [],
  attributes: {
    config_data: "ewogICJhZHZhbmNlU2V0dGluZyI6IHsKICAgICJiYWNrdXBEYkJlZm9yZVJlc3RhcnQiOiB0cnVlLAogICAgImR1bXBBbGxUYWdzIjogdHJ1ZSwKICAgICJlbmFibGVBcGlMb2dzIjogdHJ1ZSwKICAgICJlbmFibGVTZXR1cE1vZGVUYWdMb2ciOiB0cnVlLAogICAgImVuYWJsZVRyYW5zYWN0aW9uTW9kZVRhZ0xvZyI6IHRydWUsCiAgICAiZW5hYmxlX3NldHVwX21vZGVfdGFnX2xvZyI6IHRydWUsCiAgICAiZW5hYmxlX3RyYW5zYWN0aW9uX21vZGVfdGFnX2xvZyI6IHRydWUsCiAgICAidHJhY2tUYWdDb3VudCI6IHRydWUsCiAgICAidHJhY2tUYWdTZWVuQ291bnQiOiB0cnVlCiAgfSwKICAiYXBpIjogewogICAgIml0ZWtfYmFzZV91cmwiOiAiaHR0cHM6Ly9pdGVrcG9wbG9ncWEuc3ltZ292bGFicy5jb20iLAogICAgIml0ZWtfcGFzc3dvcmQiOiAic2VjcmV0MTIzIiwKICAgICJpdGVrX3VzZXJuYW1lIjogImFnZW50MDAxIgogIH0sCiAgImFwcCI6IHsKICAgICJjb21wTmFtZSI6ICJJbmZvdGVrIFNvZnR3YXJlICYgU3lzdGVtcyIsCiAgICAibmFtZSI6ICJpLVRFSyIsCiAgICAidmVyc2lvbiI6ICJWMjIiCiAgfSwKICAiYmxvY2tlZF90YWdzX2ZpbGVfcGF0aCI6ICJkYi9ibG9ja2VkX3RhZ3MudHh0IiwKICAiY29udGFjdCI6IHsKICAgICJwaG9uZSI6ICIrOTEgMjAtNjcxODQwMDAiLAogICAgIndlYnNpdGUiOiAid3d3LmluZm90ZWtzb2Z0d2FyZS5jb20iCiAgfSwKICAiZGIiOiB7CiAgICAiYmFja3VwX2RiIjogdHJ1ZSwKICAgICJjbGVhcl9kYl9hZnRlcl9yZXBvcnQiOiB0cnVlLAogICAgImNsZWFyX3RhYmxlc19hdF9ib290IjogdHJ1ZSwKICAgICJtYXhfdHJhbnNhY3Rpb25fY291bnQiOiAxMDAwMDAwLAogICAgInJldHJ5X3RpbWVfdG9fZGVsZXRlX3Jlc2lkdWFsX3NjYW5uZWRfdGFnc19ocnMiOiAxMCwKICAgICJyZXRyeV90aW1lX3RvX2RlbGV0ZV90YWdzX3NlYyI6IDIwLAogICAgInRyYW5zYWN0aW9uX3RhYmxlX25hbWUiOiAidHJhbnNhY3Rpb25zIgogIH0sCiAgImRldmljZU1hYyI6ICIyQzpDRjo2NzoxRDo2Mzo0MCIsCiAgImdwaW8iOiB7CiAgICAiYmVlcF9jb3VudCI6IDIsCiAgICAiZXh0ZXJuYWxfYnV6emVyX3BpbiI6IDM3LAogICAgImludGVybmFsX2J1enplcl9waW4iOiAyMywKICAgICJvblRpbWUiOiAyCiAgfSwKICAiaHViX3NldHRpbmdzIjogewogICAgImFwaV9rZXkiOiAiYWdlbnQwMDEiLAogICAgImNsaWVudF9pZCI6ICJhZ2VudDAwMSIsCiAgICAiY2xpZW50X3NlY3JldCI6ICJzZWNyZXQxMjMiLAogICAgImhlYXJ0YmVhdF9pbnRlcnZhbCI6ICI2MHMiLAogICAgImh1Yl9iYXNlX3VybCI6ICJodHRwczovL2RldmxhYjAxLmFwcGRiLmlvIiwKICAgICJpdGVrX2h1Yl9iYXNlX3VybCI6ICJodHRwOi8vMTkyLjE2OC4xLjEwMToxMjExIiwKICAgICJpdGVrX2h1Yl9jbGllbnRJZCI6ICJhZ2VudDAwMSIsCiAgICAiaXRla19odWJfY2xpZW50U2VjcmV0IjogInNlY3JldDEyMyIsCiAgICAibWF4X3JldHJpZXMiOiAzLAogICAgInBvcF9hbmFseXRpY3NfaHViX2Jhc2VfdXJsIjogImh0dHA6Ly8xOTIuMTY4LjEuMTAxOjEyMTEiLAogICAgInBvcF9hbmFseXRpY3NfaHViX2NsaWVudF9pZCI6ICJhZ2VudDAwMSIsCiAgICAicG9wX2FuYWx5dGljc19odWJfY2xpZW50X3NlY3JldCI6ICJzZWNyZXQxMjMiLAogICAgInJldHJ5X2ludGVydmFsIjogIjVzIiwKICAgICJ0aW1lb3V0IjogIjMwcyIKICB9LAogICJqYXZhIjogewogICAgIkpBUl9GSUxFX05BTUUiOiAiY3VzdG9tZXBjYXBpNF8xXzAuamFyIiwKICAgICJKVk1fUEFUSCI6ICIvaG9tZS9waS9qZGstMjIuMC4xL2xpYi9zZXJ2ZXIvbGlianZtLnNvIgogIH0sCiAgImxvZyI6IHsKICAgICJkZWZhdWx0X2xldmVsIjogIldBUk5JTkciLAogICAgImxldmVscyI6IHsKICAgICAgImFwaWNsaWVudC9hcGlfY2xpZW50LnB5IjogIldBUk5JTkciLAogICAgICAiZGFlbW9uX21hbmFnZXIucHkiOiAiV0FSTklORyIsCiAgICAgICJkYi9kYl9yZXBvLnB5IjogIldBUk5JTkciLAogICAgICAiaHcvY203MTBfd29ya2VyLnB5IjogIldBUk5JTkciLAogICAgICAidGhyZWFkcy9jb25maWdfd29ya2VyLnB5IjogIldBUk5JTkciLAogICAgICAidGhyZWFkcy9jb250cm9sX3dvcmtlci5weSI6ICJXQVJOSU5HIiwKICAgICAgInRocmVhZHMvZml0dGluZ19yb29tLnB5IjogIkRFQlVHIiwKICAgICAgInRocmVhZHMvbG9zc19wcmV2LnB5IjogIldBUk5JTkciLAogICAgICAidGhyZWFkcy90YWdwcm9jZXNzX3dvcmtlci5weSI6ICJXQVJOSU5HIiwKICAgICAgInRocmVhZHMvdGFncmVhZF93b3JrZXIucHkiOiAiV0FSTklORyIsCiAgICAgICJ0aHJlYWRzL3dvcmtmbG93X2hhbmRsZXIucHkiOiAiREVCVUciCiAgICB9LAogICAgIm1heF9sb2dfc2l6ZV9tYiI6IDEwMAogIH0sCiAgIm5ldHdvcmtDb25maWd1cmF0aW9uIjogewogICAgImdhdGV3YXkiOiAiMTkyLjE2OC4xMC4xIiwKICAgICJpcEFkZHJlc3MiOiAiMTkyLjE2OC4xMC4xMDEiLAogICAgIm5ldHdvcmtNb2RlIjogIlN0YXRpYyBJUCIsCiAgICAicHJpbWFyeURucyI6ICI4LjguOC44IiwKICAgICJzZWNvbmRhcnlEbnMiOiAiNC40LjQuNCIKICB9LAogICJwbGF0Zm9ybSI6ICJyYXNwYmVycnlwaSIsCiAgInNlcmlhbCI6IHsKICAgICJiYXVkcmF0ZSI6IDExNTIwMCwKICAgICJieXRlc2l6ZSI6ICJFSUdIVCIsCiAgICAicGFyaXR5IjogIk5PTkUiLAogICAgInBvcnQiOiAiL2Rldi90dHlBTUEwIiwKICAgICJzdG9wYml0cyI6ICJPTkUiLAogICAgInRpbWVvdXQiOiAwCiAgfSwKICAic3lzdGVtQ29uZmlndXJhdGlvbiI6IHsKICAgICJhbnRlbm5hcyI6IFsKICAgICAgWwogICAgICAgIDEsCiAgICAgICAgMTAwMCwKICAgICAgICAxMDAKICAgICAgXSwKICAgICAgWwogICAgICAgIDIsCiAgICAgICAgMTAwMCwKICAgICAgICAxMDAKICAgICAgXSwKICAgICAgWwogICAgICAgIDMsCiAgICAgICAgMTAwMCwKICAgICAgICAxMDAKICAgICAgXSwKICAgICAgWwogICAgICAgIDQsCiAgICAgICAgMTAwMCwKICAgICAgICAxMDAKICAgICAgXQogICAgXSwKICAgICJiZWVwX2NvdW50IjogMSwKICAgICJiZWVwX2NvdW50X2Zvcl9zZXR1cF90b190cmFuc2FjdGlvbiI6IDIsCiAgICAiYm9vdF9tb2RlIjogImlkbGUiLAogICAgImJ1enplclBpbiI6ICJpbnRlcm5hbCIsCiAgICAiY3JpdGljYWxfbG93ZXN0X3Jzc2lfdGhyZXNob2xkIjogNjAsCiAgICAiZW5hYmxlX2JlZXBfZm9yX2NyaXRpY2FsX2xvd19yc3NpX3RocmVzaG9sZCI6IHRydWUsCiAgICAiZW5hYmxlX2ZvcmNlX3NldHVwX3RvX3RyYW5zYWN0aW9uX21vZGUiOiB0cnVlLAogICAgImVuYWJsZV90cmFuc2FjdGlvbl90b19zZXR1cCI6IHRydWUsCiAgICAiZXBjX3N0YXJ0X3BhdHRlcm5zIjogWwogICAgICAiMzUiCiAgICBdLAogICAgImludGVydmFsX3RvX2RldGVjdF9mcmVzaF90YWciOiA2LAogICAgIm1heF9iZWVwX2NvdW50X2Zvcl90cmFuc2FjdGlvbiI6IDIsCiAgICAibWF4X2JlZXBfY291bnRfdG9fbXV0ZSI6IDQsCiAgICAibWF4X211dGVfZHVyYXRpb24iOiA2MDYwMCwKICAgICJtYXhpbXVtX3NldHVwX3BoYXNlX3RpbWUiOiAyNzAwLAogICAgIm9lbV9lcGMiOiAiNjkyZDU0NDU0YjcyNjY2OTY0NzQ2MTY3IiwKICAgICJvcGVyYXRpbmdNb2RlIjogIkxvc3MgUHJldmVudGlvbiIsCiAgICAib3BlcmF0aW9uVHlwZSI6ICJTZXR1cCBNb2RlIiwKICAgICJwcmVfbXV0ZV9jb3VudF9mb3JfdHJhbnNhY3Rpb25fdG9fc2V0dXAiOiAyLAogICAgInF1aWV0UGVyaW9kIjogMTY1LAogICAgInJzc2lWYXJpYXRpb24iOiAxLAogICAgInJzc2lWYXJpYXRpb25fc2V0dXBfcGhhc2UiOiAxLAogICAgInNjaGVkdWxlciI6IHsKICAgICAgImRheXMiOiBbCiAgICAgICAgIk1vbiIsCiAgICAgICAgIlR1ZSIsCiAgICAgICAgIldlZCIsCiAgICAgICAgIlRodSIsCiAgICAgICAgIkZyaSIsCiAgICAgICAgIlNhdCIsCiAgICAgICAgIlN1biIKICAgICAgXSwKICAgICAgInRpbWUiOiAiMDg6MDY6MDAiCiAgICB9LAogICAgInNldHVwX3BoYXNlX2FudGVubmFzIjogWwogICAgICBbCiAgICAgICAgMSwKICAgICAgICAxMDAwLAogICAgICAgIDEwMAogICAgICBdLAogICAgICBbCiAgICAgICAgMiwKICAgICAgICAxMDAwLAogICAgICAgIDEwMAogICAgICBdLAogICAgICBbCiAgICAgICAgMywKICAgICAgICAxMDAwLAogICAgICAgIDEwMAogICAgICBdLAogICAgICBbCiAgICAgICAgNCwKICAgICAgICAxMDAwLAogICAgICAgIDEwMAogICAgICBdCiAgICBdLAogICAgInRhZ19hbGFybV9kdXJhdGlvbiI6IDIsCiAgICAidHJhbnNhY3Rpb25fbW9kZV90YWdfcmV0YWluX3RpbWVfc2VjIjogNjAKICB9LAogICJ3aGl0ZWxpc3RlZF90YWdzX2ZpbGVfcGF0aCI6ICJkYi93aGl0ZWxpc3RlZF90YWdzLnR4dCIKfQ=="
  }
});
~~~~
//db.getCollection("scanagents").find({})
  db.scanagents.updateOne(
    { "apiAuthPojo.clientId": "KY7TnchlzQ8-CwK04FJ1Xw" },
    { $set: { "apiAuthPojo.clientSecret": "$2a$10$1K1sFLDinQdyuakTLfRT2eIGYXVAS38deafagri91kc0aaA5oI1dC" } }
  )
    db.api_auth.updateOne(
    { clientId: "KY7TnchlzQ8-CwK04FJ1Xw" },
    { $set: { clientSecret: "$2a$10$1K1sFLDinQdyuakTLfRT2eIGYXVAS38deafagri91kc0aaA5oI1dC" } }
  )
  db.app_api_auth.updateOne(
    { clientId: "KY7TnchlzQ8-CwK04FJ1Xw" },
    { $set: { clientSecret: "$2a$10$1K1sFLDinQdyuakTLfRT2eIGYXVAS38deafagri91kc0aaA5oI1dC" } }
  )
    db.scanagents.findOne(
    { "apiAuthPojo.clientId": "KY7TnchlzQ8-CwK04FJ1Xw" },
    { name: 1, "apiAuthPojo.clientId": 1 }
  )
    db.scanagents.findOne(
      { 'apiAuthPojo.clientId': 'KY7TnchlzQ8-CwK04FJ1Xw' },
      { organisationId: 1, name: 1, agentId: 1 }
    )



